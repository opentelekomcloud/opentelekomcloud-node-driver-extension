{"version":3,"file":"opentelekomcloud-1.0.0.umd.min.cloud-credential.js","mappings":"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","sources":["webpack://opentelekomcloud-1.0.0/./opentelekomcloud.ts","webpack://opentelekomcloud-1.0.0/./cloud-credential/opentelekomcloud.vue","webpack://opentelekomcloud-1.0.0/../../node_modules/@rancher/shell/utils/url.ts","webpack://opentelekomcloud-1.0.0/./components/BusyButton.vue","webpack://opentelekomcloud-1.0.0/./components/BusyButton.vue?e18e","webpack://opentelekomcloud-1.0.0/./cloud-credential/opentelekomcloud.vue?903d","webpack://opentelekomcloud-1.0.0/./components/BusyButton.vue?c6e4","webpack://opentelekomcloud-1.0.0/./cloud-credential/opentelekomcloud.vue?984a","webpack://opentelekomcloud-1.0.0/./components/BusyButton.vue?c1e0","webpack://opentelekomcloud-1.0.0/./cloud-credential/opentelekomcloud.vue?d272"],"sourcesContent":["/**\n * Helper class for dealing with the Open Telekom Cloud (OpenStack-based) APIs\n *\n * This is adapted from the Rancher OpenStack helper and extended with the\n * OTC-specific calls from the legacy Ember client.js:\n *  - listNodeFlavors\n *  - listNodeImages (IMS / cloudimages)\n *  - listVPCs / listSubnets\n *  - waitForVPCUp / createVPC\n *  - waitForSubnetUp / createSubnet\n *  - listKeyPairs\n *  - listSecurityGroups\n *  - listProjects\n *\n * All calls are proxied via Rancher meta proxy using management/request.\n */\nexport class OpenTelekomCloud {\n  public domainName: string = '';\n  public endpoint: string = '';\n  public projectDomainName: string = '';\n  public projectId: string = '';\n  public projectName: string = '';\n  public username: string = '';\n  public password: string = '';\n  public token: string = '';\n  public region: string = '';\n  private catalog: any;\n  private endpoints: Record<string, string> = {};\n  private userId: string = '';\n  public vpcId: string = '';\n\n  private $dispatch: any;\n\n  public regionsFromCatalog: any[] = [];\n\n  constructor($store: any, obj: any) {\n    if (obj.annotations) {\n      Object.keys(obj.annotations).forEach((key) => {\n        const p = key.split('/');\n\n        if (p.length === 2 && p[0] === 'opentelekomcloud.cattle.io') {\n          const field = p[1];\n\n          (this as any)[field] = obj.annotations[key];\n        }\n      });\n    } else {\n      // Copy from options to this\n      Object.keys(obj).forEach((key) => {\n        (this as any)[key] = obj[key];\n      });\n    }\n\n    this.$dispatch = $store.dispatch;\n  }\n\n  /**\n   * Authenticate using username/password and (optionally) project.\n   * Populates this.token, this.userId and this.endpoints (nova, vpc, glance).\n   */\n  public async getToken() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, '');\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n    const url = `${ baseUrl }/auth/tokens`;\n\n    const data: any = {\n      auth: {\n        identity: {\n          methods:  ['password'],\n          password: {\n            user: {\n              name:     this.username,\n              domain:   { name: this.domainName },\n              password: this.password\n            }\n          }\n        }\n      }\n    };\n\n    if (this.projectName) {\n      // If projectName is set, scope to project\n      data.auth.scope = {\n        project: {\n          name:   this.projectName,\n          // projectDomainName is optional for OTC; if set, use it\n          ...(this.projectDomainName ? { domain: { name: this.projectDomainName } } : {})\n        }\n      };\n    } else {\n      // Otherwise scope to domain\n      data.auth.scope = {\n        domain: { name: this.domainName }\n      };\n    }\n\n    const headers = { Accept: 'application/json' };\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method:               'POST',\n        redirectUnauthorized: false,\n        data\n      }, { root: true });\n\n      if (res._status === 502) {\n        return { error: 'Could not proxy request - URL may not be in Rancher\\'s allow list' };\n      }\n\n      this.token = res._headers?.['x-subject-token'];\n      this.userId = res?.token?.user?.id;\n\n      this.regionsFromCatalog = [];\n\n      if (res?.token && res.token.catalog) {\n        this.catalog = res.token.catalog;\n        this.endpoints = {};\n\n        this.catalog.forEach((service: any) => {\n          // OTC uses service.name values such as 'nova', 'vpc', 'glance'\n          const endpointForRegion = (service.endpoints || []).find((ep: any) => ep.region === this.region);\n\n          if (!endpointForRegion) {\n            return;\n          }\n\n          switch (service.name) {\n          case 'nova':\n            this.endpoints.compute = endpointForRegion.url;\n            break;\n          case 'vpc':\n            this.endpoints.vpc = endpointForRegion.url;\n            break;\n          case 'glance':\n            this.endpoints.image = endpointForRegion.url;\n            break;\n          default:\n            break;\n          }\n\n          if (endpointForRegion && service.name === 'nova') {\n            if (!this.regionsFromCatalog.includes(endpointForRegion.region)) {\n              this.regionsFromCatalog.push(endpointForRegion.region);\n            }\n          }\n        });\n      }\n\n      this.regionsFromCatalog = this.regionsFromCatalog.map((id) => {\n        return { id }\n      });\n\n      return res;\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n\n      return { error: e };\n    }\n  }\n\n  public async getFlavors(value: any, initial?: string) {\n    return await this.getComputeOptions(value, '/flavors', 'flavors', undefined, initial);\n  }\n\n  public async getImages(value: any, initial?: string) {\n    return await this.getImageOptions(value, '/v2/cloudimages', 'images', undefined, initial);\n  }\n\n  public async getKeyPairs(value: any, initial?: string) {\n    return await this.getComputeOptions(value, '/os-keypairs', 'keypairs', (v: any) => v.keypair, initial);\n  }\n\n  public async getSecurityGroups(value: any, initial?: string) {\n    return await this.getComputeOptions(value, '/os-security-groups', 'security_groups', undefined, initial);\n  }\n\n  public async getFloatingIpPools(value: any, initial?: string) {\n    return await this.getComputeOptions(value, '/os-floating-ip-pools', 'floating_ip_pools', undefined, initial);\n  }\n\n  public async getVpcs(value: any, initial?: string) {\n    return await this.getVpcOptions(value, '/vpcs', 'vpcs', undefined, initial);\n  }\n\n  public async getSubnets(value: any, vpcId: string, initial?: string) {\n    // Optionally remember the last VPC ID used\n    this.vpcId = vpcId;\n    return await this.getVpcOptions(\n      value,\n      `/subnets?vpc_id=${ encodeURIComponent(vpcId) }`,\n      'subnets',\n      undefined,\n      initial\n    );\n  }\n\n  public async getAvailabilityZones(value: any, initial?: string) {\n    return await this.getComputeOptions(value, '/os-availability-zone', 'availabilityZoneInfo', (zone: any) => {\n      return {\n        ...zone,\n        name: zone.zoneName\n      };\n    }, initial);\n  }\n\n  public async getImageOptions(value: any, api: string, field: string, mapper?: Function, initial?: string) {\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = '';\n\n    const query = [\n      'visibility=public',\n      'protected=true',\n      '__os_type=Linux',\n      '__os_bit=64',\n    ].join('&');\n\n    const res = await this.makeImageRequest(api, `?${ query }`);\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (mapper) {\n        list = list.map((k: any) => mapper(k));\n      }\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (initial) {\n        const found = value.options.find((option: any) => option.value.name === initial);\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n      if (!value.selected && value.options.length > 0) {\n        value.selected = value.options[0].value;\n      }\n    } else {\n      value.options = [];\n      value.selected = null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async getComputeOptions(value: any, api: string, field: string, mapper?: Function, initial?: string) {\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = '';\n\n    const res = await this.makeComputeRequest(api);\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (mapper) {\n        list = list.map((k: any) => mapper(k));\n      }\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (initial) {\n        const found = value.options.find((option: any) => option.value.name === initial);\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n      if (!value.selected && value.options.length > 0) {\n        value.selected = value.options[0].value;\n      }\n    } else {\n      value.options = [];\n      value.selected = null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async getVpcOptions(value: any, api: string, field: string, mapper?: Function, initial?: string) {\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = '';\n\n    const res = await this.makeVpcRequest(api);\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (mapper) {\n        list = list.map((k: any) => mapper(k));\n      }\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (initial) {\n        const found = value.options.find((option: any) => option.value.name === initial);\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n      if (!value.selected && value.options.length > 0) {\n        value.selected = value.options[0].value;\n      }\n    } else {\n      value.options = [];\n      value.selected = null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async makeComputeRequest(api: string) {\n    const endpoint = this.endpoints['compute']?.replace(/^https?:\\/\\//, '');\n    if (!endpoint) {\n      return { error: 'No compute endpoint discovered from catalog' };\n    }\n\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n    const url = `${ baseUrl }${ api }`;\n\n    const headers = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      return await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: 'GET',\n        redirectUnauthorized: false,\n      }, {root: true});\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n\n      return { error: e };\n    }\n  }\n\n  private async makeVpcRequest(api: string, method = 'GET', body?: any) {\n    console.log('[OTC] makeVpcRequest: api =', api, 'endpoints =', this.endpoints);\n\n    const endpoint = this.endpoints['vpc']?.replace(/^https?:\\/\\//, '');\n    console.log('[OTC] makeVpcRequest: ep =', endpoint);\n\n    if (!endpoint) {\n      console.error('[OTC] No VPC endpoint for region', this.region, 'catalog:', this.catalog);\n      return null;    }\n\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n    const url = `${ baseUrl }${ api }`;\n    console.log('[OTC] makeVpcRequest: url =', url);\n\n    const headers: any = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      return await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: method,\n        redirectUnauthorized: false,\n      }, {root: true});\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n\n      return { error: e };\n    }\n  }\n\n  private async makeImageRequest(api: string, queryString = '') {\n    const endpoint = this.endpoints['image']?.replace(/^https?:\\/\\//, '');\n    if (!endpoint) {\n      return { error: 'No image (glance/IMS) endpoint discovered from catalog' };\n    }\n\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n    const url = `${ baseUrl }${ api }${ queryString }`;\n\n    const headers: any = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      return await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: 'GET',\n        redirectUnauthorized: false,\n      }, {root: true});\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n\n      return { error: e };\n    }\n  }\n\n  /**\n   * Generic Keystone-based project list used by OpenStack helper.\n   * Kept for compatibility.\n   */\n  public async getProjects() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, '');\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n\n    const headers = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url:                  `${ baseUrl }/users/${ this.userId }/projects`,\n        headers,\n        method:               'GET',\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      return res?.projects;\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n\n      return { error: e };\n    }\n  }\n\n  // ---------------------------------------------------------------------------\n  // OTC-specific \"raw\" calls adapted from legacy client.js\n  // ---------------------------------------------------------------------------\n\n  /**\n   * Wait until VPC is available (status === 'OK').\n   */\n  public async waitForVPCUp(vpcId: string, endTime?: number): Promise<void> {\n    const timeoutMs = 10 * 1000;\n\n    if (!endTime) {\n      endTime = Date.now() + timeoutMs;\n    }\n\n    if (Date.now() > endTime) {\n      throw new Error('Timeout reached while waiting for VPC to become OK');\n    }\n\n    const res = await this.makeVpcRequest(`/vpcs/${ vpcId }`);\n\n    const status = (res as any)?.vpc?.status;\n\n    if (status === 'OK') {\n      return;\n    }\n\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n\n    return this.waitForVPCUp(vpcId, endTime);\n  }\n\n  /**\n   * Create new VPC and wait until it is available.\n   * Returns created VPC ID.\n   */\n  public async createVPC(name: string, cidr: string): Promise<string> {\n    const body = {\n      vpc: {\n        name,\n        cidr\n      }\n    };\n\n    const res = await this.makeVpcRequest('/vpcs', 'POST', body);\n\n    if ((res as any)?.vpc?.id) {\n      const vpcId = (res as any).vpc.id;\n\n      await this.waitForVPCUp(vpcId);\n\n      return vpcId;\n    }\n\n    if ((res as any)?.error) {\n      throw (res as any).error;\n    }\n\n    throw new Error('Failed to create VPC');\n  }\n\n  /**\n   * Wait until subnet reaches status ACTIVE.\n   */\n  public async waitForSubnetUp(subnetId: string, endTime?: number): Promise<void> {\n    const timeoutMs = 10 * 1000;\n\n    if (!endTime) {\n      endTime = Date.now() + timeoutMs;\n    }\n\n    if (Date.now() > endTime) {\n      throw new Error('Timeout reached while waiting for Subnet to become ACTIVE');\n    }\n\n    const res = await this.makeVpcRequest(`/subnets/${ subnetId }`);\n\n    const status = (res as any)?.subnet?.status;\n\n    if (status === 'ACTIVE') {\n      return;\n    }\n\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n\n    return this.waitForSubnetUp(subnetId, endTime);\n  }\n\n  /**\n   * Create new subnet instance and wait until it becomes ACTIVE.\n   * Returns created subnet ID.\n   */\n  public async createSubnet(vpcId: string, name: string, cidr: string, gatewayIP: string): Promise<string> {\n    // Default DNS list as in client.js\n    const defaultDNS = ['100.125.4.25', '8.8.8.8'];\n\n    const body = {\n      subnet: {\n        name,\n        cidr,\n        gateway_ip: gatewayIP,\n        vpc_id:     vpcId,\n        dnsList:    defaultDNS\n      }\n    };\n\n    const res = await this.makeVpcRequest('/subnets', 'POST', body);\n\n    if ((res as any)?.subnet?.id) {\n      const subnetId = (res as any).subnet.id;\n\n      await this.waitForSubnetUp(subnetId);\n\n      return subnetId;\n    }\n\n    if ((res as any)?.error) {\n      throw (res as any).error;\n    }\n\n    throw new Error('Failed to create Subnet');\n  }\n\n  private convertToOptions(list: any) {\n    const sorted = (list || []).sort((a: any, b: any) => a.name.localeCompare(b.name));\n\n    const options = sorted.map((p: any) => {\n      return {\n        label: p.name,\n        value: p\n      };\n    });\n\n    // Prepend an empty option so dropdowns can have and select a blank value\n    return [\n      {\n        label: '-- EMPTY --',\n        value: null\n      },\n      ...options\n    ];\n  }\n}\n","<script>\nimport Banner from '@components/Banner/Banner.vue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { parse as parseUrl } from '@shell/utils/url';\nimport { _CREATE } from '@shell/config/query-params';\nimport BusyButton from '../components/BusyButton.vue';\nimport { OpenTelekomCloud } from '../opentelekomcloud';\n\nexport default {\n  components: {\n    Banner,\n    BusyButton,\n    LabeledInput,\n    LabeledSelect,\n  },\n\n  props: {\n    mode: {\n      type: String,\n      required: true,\n    },\n\n    // Rancher Cloud Credential model\n    value: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    // Load our node-driver so we can modify its whitelistDomains (same pattern as openstack.vue)\n    this.driver = await this.$store.dispatch('rancher/find', {\n      type: 'nodedriver',\n      id:   'opentelekomcloud'\n    });\n  },\n\n  data() {\n    const decoded = this.value.decodedData || {};\n\n    // When editing an existing Cloud Credential, hydrate decodedData from annotations\n    if (this.mode !== _CREATE && this.value.annotations) {\n      const ann = this.value.annotations;\n\n      decoded.username          = ann['opentelekomcloud.cattle.io/username'] || decoded.username;\n      decoded.domainName        = ann['opentelekomcloud.cattle.io/domainName'] || decoded.domainName;\n      decoded.region            = ann['opentelekomcloud.cattle.io/region'] || decoded.region;\n      decoded.authUrl           = ann['opentelekomcloud.cattle.io/authUrl'] || decoded.authUrl;\n      decoded.projectName       = ann['opentelekomcloud.cattle.io/projectName'] || decoded.projectName;\n    }\n\n    // Default region if nothing is set yet\n    if (!decoded.region) {\n      decoded.region = 'eu-de';\n    }\n\n    // Ensure authUrl derived from region\n    decoded.authUrl = this.authUrlForRegion(decoded.region);\n\n    // Push back into the model via setData so the store sees the values\n    this.value.setData('username', decoded.username || '');\n    this.value.setData('domainName', decoded.domainName || '');\n    this.value.setData('password', decoded.password || '');\n    this.value.setData('region', decoded.region || '');\n    this.value.setData('authUrl', decoded.authUrl || '');\n\n    return {\n      driver:         {},\n      projects:       null,\n      step:           1,\n      busy:           false,\n      errorAllowHost: false,\n      allowBusy:      false,\n      error:          '',\n      region:         decoded.region || 'eu-de',\n      project:        decoded.projectName || '',\n    };\n  },\n\n  computed: {\n    projectOptions() {\n      const sorted = (this.projects || []).sort((a, b) => a.name.localeCompare(b.name));\n\n      return sorted.map((p) => {\n        return {\n          label: p.name,\n          value: p.name\n        };\n      });\n    },\n\n    // Static OTC regions – region is required\n    regionOptions() {\n      const regions = [\n        { id: 'eu-de',  name: 'eu-de (Germany)' },\n        { id: 'eu-nl',  name: 'eu-nl (Netherlands)' },\n        { id: 'eu-ch2', name: 'eu-ch2 (Switzerland)' },\n      ];\n\n      return regions.map((r) => ({\n        label: r.name,\n        value: r.id\n      }));\n    },\n\n    hostname() {\n      const u = parseUrl(this.value.decodedData.authUrl);\n\n      return u?.host || '';\n    },\n\n    // We can authenticate only when all required fields are present\n    canAuthenticate() {\n      return !!this.value?.decodedData?.domainName &&\n        !!this.value?.decodedData?.username &&\n        !!this.value?.decodedData?.password &&\n        !!this.region &&\n        !!this.value?.decodedData?.authUrl;\n    },\n  },\n\n  watch: {\n    region(newVal) {\n      const url = this.authUrlForRegion(newVal);\n      this.value.setData('region', newVal || '');\n      this.value.setData('authUrl', url || '');\n      this.value.decodedData.region = newVal;\n      this.value.decodedData.authUrl = url;\n    },\n  },\n\n  created() {\n    this.$emit('validationChanged', false);\n\n    this.value.annotations = this.value.annotations || {};\n\n    if (!this.value.annotations['provisioning.cattle.io/driver']) {\n      this.value.annotations['provisioning.cattle.io/driver'] = 'opentelekomcloud';\n    }\n\n    const url = this.authUrlForRegion(this.region);\n\n    this.value.setData('region', this.region || '');\n    this.value.setData('authUrl', url || '');\n    this.value.decodedData.region = this.region;\n    this.value.decodedData.authUrl = url;\n  },\n\n  methods: {\n    // OTC-specific mapping from region -> IAM endpoint\n    authUrlForRegion(region) {\n      if (!region) {\n        return '';\n      }\n\n      if (region === 'eu-ch2') {\n        return `https://iam-pub.${ region }.sc.otc.t-systems.com/v3`;\n      }\n\n      return `https://iam.${ region }.otc.t-systems.com/v3`;\n    },\n\n    // Called by Rancher when validating before save\n    test() {\n      // Ensure annotations object exists\n      this.value.annotations = this.value.annotations || {};\n\n      const decoded = this.value.decodedData;\n\n      this.value.annotations['opentelekomcloud.cattle.io/username']          = decoded.username;\n      this.value.annotations['opentelekomcloud.cattle.io/domainName']        = decoded.domainName;\n      this.value.annotations['opentelekomcloud.cattle.io/password']          = decoded.password;\n      this.value.annotations['opentelekomcloud.cattle.io/region']            = decoded.region;\n      this.value.annotations['opentelekomcloud.cattle.io/authUrl']           = decoded.authUrl;\n\n      if (this.project) {\n        const project = this.projects?.find((p) => p.name === this.project);\n\n        if (project) {\n          this.value.annotations['opentelekomcloud.cattle.io/projectName'] = project.name;\n          // Also store projectName directly in the credential config so it is available on opentelekomcloudcredentialConfig\n          this.value.setData('projectName', project.name || '');\n          this.value.decodedData.projectName = project.name || '';\n        }\n      }\n\n      return true;\n    },\n\n    // When user clicks “Edit Auth Config” – clear projects and go back to step 1\n    clear() {\n      this.step = 1;\n      this.projects = null;\n      this.errorAllowHost = false;\n\n      // Tell parent that the form is now invalid again\n      this.$emit('validationChanged', false);\n    },\n\n    hostInAllowList() {\n      if (!this.driver?.whitelistDomains) {\n        return false;\n      }\n\n      const u = parseUrl(this.value.decodedData.authUrl);\n\n      if (!u.host) {\n        return true;\n      }\n\n      return (this.driver?.whitelistDomains || []).includes(u.host);\n    },\n\n    async addHostToAllowList() {\n      this.allowBusy = true;\n      const u = parseUrl(this.value.decodedData.authUrl);\n\n      this.driver.whitelistDomains = this.driver.whitelistDomains || [];\n\n      if (!this.hostInAllowList()) {\n        this.driver.whitelistDomains.push(u.host);\n      }\n\n      try {\n        await this.driver.save();\n\n        // Retry connect after whitelist update\n        this.$refs.connect.$el.click();\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error('Could not update driver', e);\n        this.allowBusy = false;\n      }\n    },\n\n    async connect(cb) {\n      this.error = '';\n      this.errorAllowHost = false;\n\n      const decoded = this.value.decodedData;\n\n      if (!decoded.authUrl) {\n        return cb(false);\n      }\n\n      const os = new OpenTelekomCloud(this.$store, {\n        endpoint:   decoded.authUrl,\n        domainName: decoded.domainName,\n        username:   decoded.username,\n        password:   decoded.password,\n      });\n\n      this.allowBusy = false;\n      this.step = 2;\n      this.busy = true;\n\n      let okay = false;\n\n      const res = await os.getToken();\n\n      if (res.error) {\n        // eslint-disable-next-line no-console\n        console.error(res.error);\n        okay = false;\n\n        this.step = 1;\n        this.projects = null;\n\n        if (res.error._status === 502 && !this.hostInAllowList()) {\n          this.errorAllowHost = true;\n        } else if (res.error._status === 502) {\n          this.error = this.t?.('driver.opentelekomcloud.auth.errors.badGateway') || 'Bad gateway when talking to OTC IAM';\n        } else if (res.error._status === 401) {\n          this.error = this.t?.('driver.opentelekomcloud.auth.errors.unauthorized') || 'Unauthorized – check username/password/domain';\n        } else {\n          this.error = res.error.message || this.t?.('driver.opentelekomcloud.auth.errors.other') || 'Unexpected error when authenticating';\n        }\n      } else {\n        const projects = await os.getProjects();\n\n        if (!projects.error) {\n          this.projects = projects;\n          okay = true;\n        } else {\n          this.error = projects.error.message;\n          okay = false;\n        }\n      }\n\n      this.busy = false;\n\n      // Pick first project by default if present\n      this.project = this.projectOptions[0]?.value;\n\n      // Region is selected separately and is required\n      const valid = okay && !!this.region;\n\n      this.$emit('validationChanged', valid);\n      cb(valid);\n    },\n\n    onDomainNameInput(evt) {\n      const v = evt && evt.target ? evt.target.value : evt;\n\n      this.value.setData('domainName', v);\n      this.value.decodedData.domainName = v;\n    },\n\n    onUsernameInput(evt) {\n      const v = evt && evt.target ? evt.target.value : evt;\n\n      this.value.setData('username', v);\n      this.value.decodedData.username = v;\n    },\n\n    onPasswordInput(evt) {\n      const v = evt && evt.target ? evt.target.value : evt;\n\n      this.value.setData('password', v);\n      this.value.decodedData.password = v;\n    },\n\n  }\n};\n</script>\n\n<template>\n  <div>\n    <!-- Region + derived Auth URL -->\n    <div class=\"row\">\n      <div class=\"col span-4\">\n        <LabeledSelect\n            v-model:value=\"region\"\n            label-key=\"driver.opentelekomcloud.auth.fields.region\"\n            :options=\"regionOptions\"\n            :searchable=\"false\"\n        />\n      </div>\n      <div class=\"col span-8\">\n        <LabeledInput\n          :value=\"value.decodedData.authUrl\"\n          :disabled=\"true\"\n          label-key=\"driver.opentelekomcloud.auth.fields.endpoint\"\n          placeholder-key=\"driver.opentelekomcloud.auth.placeholders.endpoint\"\n          type=\"text\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n\n    <!-- Domain Name row full width -->\n    <div class=\"row mt-20\">\n      <div class=\"col span-12\">\n        <LabeledInput\n          :value=\"value.decodedData.domainName\"\n          label-key=\"driver.opentelekomcloud.auth.fields.domainName\"\n          placeholder-key=\"driver.opentelekomcloud.auth.placeholders.domainName\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"onDomainNameInput\"\n        />\n      </div>\n    </div>\n\n    <!-- Username and Password row -->\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.username\"\n          class=\"mt-20 md:mt-0\"\n          label-key=\"driver.opentelekomcloud.auth.fields.username\"\n          placeholder-key=\"driver.opentelekomcloud.auth.placeholders.username\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"onUsernameInput\"\n        />\n      </div>\n    </div>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledInput\n            :value=\"value.decodedData.password\"\n            label-key=\"driver.opentelekomcloud.auth.fields.password\"\n            placeholder-key=\"driver.opentelekomcloud.auth.placeholders.password\"\n            type=\"password\"\n            :mode=\"mode\"\n            @input=\"onPasswordInput\"\n        />\n      </div>\n    </div>\n\n    <!-- Authenticate button + edit -->\n    <BusyButton\n      ref=\"connect\"\n      label-key=\"driver.opentelekomcloud.auth.actions.authenticate\"\n      :disabled=\"step !== 1 || !canAuthenticate\"\n      class=\"mt-20\"\n      @click=\"connect\"\n    />\n\n    <button\n      class=\"btn role-primary mt-20 ml-20\"\n      :disabled=\"busy || step === 1\"\n      @click=\"clear\"\n    >\n      {{ t('driver.opentelekomcloud.auth.actions.edit') }}\n    </button>\n\n    <!-- Error banners -->\n    <Banner\n      v-if=\"error\"\n      class=\"mt-20\"\n      color=\"error\"\n    >\n      {{ error }}\n    </Banner>\n\n    <Banner\n      v-if=\"errorAllowHost\"\n      color=\"error\"\n      class=\"allow-list-error\"\n    >\n      <div>\n        {{ t('driver.opentelekomcloud.auth.errors.notAllowed', { hostname }) }}\n      </div>\n      <button\n        :disabled=\"allowBusy\"\n        class=\"btn ml-10 role-primary\"\n        @click=\"addHostToAllowList\"\n      >\n        {{ t('driver.opentelekomcloud.auth.actions.addToAllowList') }}\n      </button>\n    </Banner>\n\n    <!-- Project picker (optional but very useful for driver) -->\n    <div\n      v-if=\"projects\"\n      class=\"row mt-20\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n            v-model:value=\"project\"\n            label-key=\"driver.opentelekomcloud.auth.fields.projectName\"\n            :options=\"projectOptions\"\n            :searchable=\"false\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .allow-list-error {\n    display: flex;\n\n    > :first-child {\n      flex: 1;\n    }\n  }\n</style>\n","type UriField = 'source' | 'protocol' | 'authority' | 'userInfo' | 'user' | 'password' | 'host' | 'port' | 'relative' | 'path' | 'directory' | 'file' | 'queryStr' | 'anchor'\ntype UriFields = {\n  [key in UriField]: string; // eslint-disable-line no-unused-vars\n}\nexport type QueryParams = {\n  [key: string]: string\n}\n\ninterface ParsedUri extends UriFields {\n  query: QueryParams;\n}\n\nexport function addParam(url: string, key: string, val: string | string[]): string {\n  let out = url + (url.includes('?') ? '&' : '?');\n\n  // val can be a string or an array of strings\n  if ( !Array.isArray(val) ) {\n    val = [val];\n  }\n  out += val.map((v) => {\n    if ( v === null ) {\n      return `${ encodeURIComponent(key) }`;\n    } else {\n      return `${ encodeURIComponent(key) }=${ encodeURIComponent(v) }`;\n    }\n  }).join('&');\n\n  return out;\n}\n\nexport function addParams(url: string, params: QueryParams): string {\n  if ( params && typeof params === 'object' ) {\n    Object.keys(params).forEach((key) => {\n      url = addParam(url, key, params[key]);\n    });\n  }\n\n  return url;\n}\n\nexport function removeParam(url: string, key: string): string {\n  const parsed = parse(url);\n\n  if ( parsed.query?.[key] ) {\n    delete parsed.query[key];\n  }\n\n  return stringify(parsed);\n}\n\nexport function parseLinkHeader(str: string): Record<string, string> {\n  const out: { [key: string]: string} = { };\n  const lines = (str || '').split(',');\n\n  for ( const line of lines ) {\n    const match = line.match(/^\\s*<([^>]+)>\\s*;\\s*rel\\s*=\"(.*)\"/);\n\n    if ( match ) {\n      out[match[2].toLowerCase()] = match[1];\n    }\n  }\n\n  return out;\n}\n\nexport function isMaybeSecure(port: number, proto: string): boolean {\n  const protocol = proto.toLowerCase();\n\n  return portMatch([port], [443, 8443], ['443']) || protocol === 'https';\n}\n\nexport function portMatch(ports: number[], equals: number[], endsWith: string[]): boolean {\n  for (let i = 0; i < ports.length; i++) {\n    const port = ports[i];\n\n    if (equals.includes(port)) {\n      return true;\n    }\n\n    for (let j = 0; j < endsWith.length; j++) {\n      const suffix = `${ endsWith[j] }`;\n      const portStr = `${ port }`;\n\n      if (portStr !== suffix && portStr.endsWith(suffix)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// https://javascriptsource.com/parseuri/\n// MIT License\nexport function parse(str: string): ParsedUri {\n  const o = parse.options;\n  const m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str);\n\n  if (!m) {\n    throw new Error(`Cannot parse as uri: ${ str }`);\n  }\n  const uri = {} as ParsedUri;\n  let i = 14;\n\n  while (i--) {\n    uri[o.key[i]] = m[i] || '';\n  }\n\n  uri.query = {};\n  uri.queryStr.replace(o.q.parser, (_, $1: string, $2: string): string => {\n    if ($1) {\n      uri[o.q.name][$1] = $2;\n    }\n\n    return '';\n  });\n\n  return uri;\n}\n\nparse.options = {\n  strictMode: false,\n  key:        ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'queryStr', 'anchor'],\n  q:          {\n    name:   'query',\n    parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n  },\n  parser: {\n    strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n    loose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  }\n} as {\n  strictMode: boolean,\n  key: UriField[],\n  q: {\n    name: 'query',\n    parser: RegExp\n  },\n  parser: {\n    strict: RegExp,\n    loose: RegExp\n  }\n};\n\nexport function stringify(uri: ParsedUri): string {\n  let out = `${ uri.protocol }://`;\n\n  if ( uri.user && uri.password ) {\n    out += `${ uri.user }:${ uri.password }@`;\n  } else if ( uri.user ) {\n    out += `${ uri.user }@`;\n  }\n\n  out += uri.host;\n\n  if ( uri.port ) {\n    out += `:${ uri.port }`;\n  }\n\n  out += uri.path || '/';\n\n  out = addParams(out, uri.query || {});\n\n  if ( uri.anchor ) {\n    out += `#${ uri.anchor }`;\n  }\n\n  return out;\n}\n","<script>\nexport default {\n  props: {\n    /**\n     * Mode maps to keys in asyncButton.* translations\n     */\n    label: {\n      type:    String,\n      default: undefined,\n    },\n    labelKey: {\n      type:    String,\n      default: undefined,\n    },\n    disabled: {\n      type:    Boolean,\n      default: false,\n    },\n    tabIndex: {\n      type:    Number,\n      default: null,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'busy-button'\n    },\n\n    manual: {\n      type:    Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return { busy: false };\n  },\n\n  computed: {\n    displayLabel() {\n      if (this.labelKey) {\n        const t = this.$store.getters['i18n/t'];\n\n        return t(this.labelKey);\n      }\n\n      return this.label;\n    }\n  },\n\n  methods: {\n    clicked($event) {\n      if ($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n\n      if ( this.disabled ) {\n        return;\n      }\n\n      const cb = () => {\n        this.busy = false;\n      };\n\n      this.$set(this, 'busy', true);\n\n      this.$emit('click', cb);\n    },\n\n    focus() {\n      (this.$refs.btn).focus();\n    }\n  }\n};\n</script>\n\n<template>\n  <button\n      ref=\"btn\"\n      class=\"btn role-primary\"\n      :disabled=\"disabled\"\n      :tab-index=\"tabIndex\"\n      :data-testid=\"componentTestid + '-async-button'\"\n      @click=\"clicked\"\n  >\n    <i\n        v-if=\"busy\"\n        class=\"icon icon-lg icon-spinner icon-spin\"\n    />\n    <span\n        v-else\n        class=\"icon-spacer\"\n    />\n    <span>{{ displayLabel }}</span>\n    <span class=\"icon-spacer\" />\n  </button>\n</template>\n<style lang=\"scss\" scoped>\n.icon-spacer {\n  width: 24px;\n}\n</style>\n","import { render } from \"./BusyButton.vue?vue&type=template&id=0b50f05a&scoped=true\"\nimport script from \"./BusyButton.vue?vue&type=script&lang=js\"\nexport * from \"./BusyButton.vue?vue&type=script&lang=js\"\n\nimport \"./BusyButton.vue?vue&type=style&index=0&id=0b50f05a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b50f05a\"]])\n\nexport default __exports__","import { render } from \"./opentelekomcloud.vue?vue&type=template&id=a228763c&scoped=true\"\nimport script from \"./opentelekomcloud.vue?vue&type=script&lang=js\"\nexport * from \"./opentelekomcloud.vue?vue&type=script&lang=js\"\n\nimport \"./opentelekomcloud.vue?vue&type=style&index=0&id=a228763c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a228763c\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".icon-spacer[data-v-0b50f05a]{width:24px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./opentelekomcloud.vue?vue&type=style&index=0&id=a228763c&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f8161026\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./BusyButton.vue?vue&type=style&index=0&id=0b50f05a&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"14ba06c2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".allow-list-error[data-v-a228763c]{display:flex}.allow-list-error[data-v-a228763c]>:first-child{flex:1}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["OpenTelekomCloud","constructor","$store","obj","_defineProperty","annotations","Object","keys","forEach","key","p","split","length","field","this","$dispatch","dispatch","getToken","endpoint","replace","baseUrl","url","data","auth","identity","methods","password","user","name","username","domain","domainName","projectName","scope","project","projectDomainName","headers","Accept","res","method","redirectUnauthorized","root","_status","error","token","_headers","userId","id","regionsFromCatalog","catalog","endpoints","service","endpointForRegion","find","ep","region","compute","vpc","image","includes","push","map","e","console","getFlavors","value","initial","getComputeOptions","undefined","getImages","getImageOptions","getKeyPairs","v","keypair","getSecurityGroups","getFloatingIpPools","getVpcs","getVpcOptions","getSubnets","vpcId","encodeURIComponent","getAvailabilityZones","zone","zoneName","api","mapper","busy","enabled","selected","query","join","makeImageRequest","list","k","options","convertToOptions","found","option","makeComputeRequest","makeVpcRequest","body","log","queryString","getProjects","projects","waitForVPCUp","endTime","timeoutMs","Date","now","Error","status","Promise","resolve","setTimeout","createVPC","cidr","waitForSubnetUp","subnetId","subnet","createSubnet","gatewayIP","defaultDNS","gateway_ip","vpc_id","dnsList","sorted","sort","a","b","localeCompare","label","class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledSelect","$data","$event","$options","regionOptions","searchable","_hoisted_3","_component_LabeledInput","$props","decodedData","authUrl","disabled","type","mode","_hoisted_4","_hoisted_5","onInput","onDomainNameInput","_hoisted_6","_hoisted_7","onUsernameInput","_hoisted_8","_hoisted_9","onPasswordInput","_component_BusyButton","ref","step","canAuthenticate","onClick","connect","_cache","args","clear","_ctx","t","_hoisted_10","_createBlock","_component_Banner","color","errorAllowHost","_toDisplayString","hostname","allowBusy","addHostToAllowList","_hoisted_11","_hoisted_12","_hoisted_13","projectOptions","parse","str","o","m","parser","strictMode","exec","uri","i","queryStr","q","_","$1","$2","strict","loose","tabIndex","componentTestid","clicked","displayLabel","props","String","default","labelKey","Boolean","Number","manual","computed","getters","stopPropagation","preventDefault","cb","$set","$emit","focus","$refs","btn","__exports__","components","Banner","BusyButton","LabeledInput","LabeledSelect","required","fetch","driver","decoded","_CREATE","ann","authUrlForRegion","setData","regions","r","u","parseUrl","host","watch","newVal","created","test","hostInAllowList","whitelistDomains","save","$el","click","os","okay","message","valid","evt","target","render","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add"],"ignoreList":[],"sourceRoot":""}